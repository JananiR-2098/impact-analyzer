<div id="exportSection" class="analysis-container">

   <div class="analysis-header">
    <div class="analysis-title"> Analysis </div>  
  </div>


  <div id="exportSection" class="analysis-body"> 

    <div class="tab-buttons" style="margin-bottom: 1rem; display: flex; gap: 1rem;">
      <button mat-raised-button color="primary" [disabled]="selectedTab === 'graph'" (click)="selectedTab = 'graph'">Impacted Files and Code Flow</button>
      <button mat-raised-button color="primary" [disabled]="selectedTab === 'testplan'" (click)="selectedTab = 'testplan'">Test Plan Overview</button>
      <div class="analysis-actions">
      <button mat-icon-button color="primary" style="font-size: 5px;" (click)="exportTestPDF()" aria-label="Download PDF">
        <mat-icon>download</mat-icon> 
      </button>
    </div>
    </div>

    <div class="analysis-outputs">

      <div *ngIf="selectedTab === 'graph'" class="output output-graph">
        <div class="output-title">Impacted Files and Code Flow</div>
          <div *ngIf="graphData && graphData.length > 1">
            <button mat-raised-button *ngFor="let g of graphData; let i = index" (click)="selectedGraph = g">
              Impacted Module {{ i + 1 }}
            </button>
          </div>
        <div class="output-graph graph-wrapper" *ngIf="selectedGraph">
          <app-graph [graph]="selectedGraph"></app-graph>
        </div>
      </div>

      <div *ngIf="selectedTab === 'testplan'" class="output output-testplan">
        <div class="output-title">Test Plan Overview</div>
        <div class="output-content" #testPlanContent [innerHTML]="testPlanHtml"></div>
      </div>

    </div>
  </div>

  <div class="chat-footer"> </div>

</div>